---
- name: Start Windows Services
  hosts: all
  gather_facts: false
  vars:
    services_to_start:
    - W3SVC  # IIS service name

  tasks:
  - name: Start Services
    win_service:
      name: "{{ item }}"
      state: started  # Can change to 'stopped' if needed
    register: service_results
    loop: "{{ services_to_start }}"

  - name: Output
    debug:
      msg: "{{ service_results.results[0].name}} is {{ service_results.results[0].state }}"
